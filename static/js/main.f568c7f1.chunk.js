(this["webpackJsonpcrud-react"]=this["webpackJsonpcrud-react"]||[]).push([[0],{32:function(t,e,c){},79:function(t,e,c){"use strict";c.r(e);var n=c(1),r=c(33),s=c.n(r),o=c(21),a=c(36),i=c(8),l=c(2),j=c(13),u=c.n(j),d=c(0),b=function(){return Object(d.jsx)("header",{className:"col-12 col-md-8 mt-2",children:Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("h1",{className:"text-center ",children:"React blog"})})})},p=function(){return Object(d.jsxs)("nav",{className:"col-12 col-md-8",children:[Object(d.jsx)(i.b,{to:"/",children:"All posts"}),Object(d.jsx)(i.b,{to:"/crear",children:"New post"})]})},h=c(9),f=c.n(h),m=(c(32),function(t){var e=t.removePost,c=t.info,n=c.id,r=c.title;return Object(d.jsxs)("tr",{children:[Object(d.jsxs)("td",{children:[" ",n," "]}),Object(d.jsxs)("td",{children:[" ",r," "]}),Object(d.jsxs)("td",{children:[Object(d.jsx)(i.b,{to:"/post/".concat(n),className:"btn btn-primary ver",children:"Show"}),Object(d.jsx)(i.b,{to:"/edit/".concat(n),className:"btn btn-warning ver",children:"Edit"}),Object(d.jsx)("button",{onClick:function(){return function(t){e(t),f.a.fire({position:"top-end",icon:"success",title:"Deleted!",showConfirmButton:!1,timer:1e3})}(n)},type:"button",className:"btn btn-danger",children:"Delete"})]})]})}),x=function(t){var e=t.posts,c=t.removePost;return Object(d.jsx)("div",{children:Object(d.jsxs)("table",{className:"table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:" ID "}),Object(d.jsx)("th",{scope:"col",children:" Title "}),Object(d.jsx)("th",{scope:"col",children:" Actions "})]})}),Object(d.jsx)("tbody",{children:0===e.length?null:Object(d.jsx)(d.Fragment,{children:Object.keys(e).map((function(t){return Object(d.jsx)(m,{info:e[t],removePost:c},t)}))})})]})})},O=function(t){var e=t.posts,c=t.removePost;return Object(d.jsx)("div",{className:"col-12 col-md-8",children:Object(d.jsx)(x,{posts:e,removePost:c})})},v=function(t){var e=t.post;return Object(d.jsx)("div",{className:"col-12 col-md-8",children:function(t){if(!t)return null;var e=t.title,c=t.body,n=t.userId;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("h1",{children:[" ",e," "]}),Object(d.jsxs)("p",{children:["Author: ",n," "]}),Object(d.jsxs)("p",{children:[" ",c," "]})]})}(e)})},N=c(20),y=c.n(N),w=c(35),g=function(t){var e=Object(n.useRef)(null),c=Object(n.useRef)(null),r=function(){var n=Object(w.a)(y.a.mark((function n(r){var s;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r.preventDefault(),s={title:e.current.value,body:c.current.value,userId:1},e.current.value&&c.current.value?t.createPost(s):f.a.fire({position:"center",icon:"error",title:"Form is empty!",showConfirmButton:!1,timer:1500});case 3:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(d.jsxs)("form",{onSubmit:r,className:"col-8",children:[Object(d.jsx)("legend",{className:"text-center",children:"Create a new post"}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Title"}),Object(d.jsx)("input",{ref:e,type:"text",className:"form-control"})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Content"}),Object(d.jsx)("textarea",{ref:c,type:"text",className:"form-control"}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",children:"Create"})]})]})},P=function(t){var e=Object(n.useRef)(null),c=Object(n.useRef)(null),r=function(n){n.preventDefault();var r={title:e.current.value,body:c.current.value,userId:1,id:t.post.id};t.editPost(r)};return Object(d.jsx)(d.Fragment,{children:function(n){if(!t.post)return null;var s=t.post,o=s.title,a=s.body;return Object(d.jsxs)("form",{onSubmit:r,className:"col-8",children:[Object(d.jsx)("legend",{className:"text-center",children:"Edit post"}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Title"}),Object(d.jsx)("input",{ref:e,type:"text",className:"form-control",defaultValue:o})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{children:"Content"}),Object(d.jsx)("textarea",{ref:c,type:"text",className:"form-control",defaultValue:a}),Object(d.jsx)("button",{type:"submit",className:"btn btn-primary mt-2",children:"Save changes"})]})]})}()})},E=function(t){var e=Object(n.useState)({posts:[]}),c=Object(a.a)(e,2),r=c[0],s=c[1];Object(n.useEffect)((function(){j()}),[]);var j=function(){u.a.get("https://jsonplaceholder.typicode.com/posts").then((function(t){s(t.data)}))},h=function(t){try{u.a.delete("https://jsonplaceholder.typicode.com/posts/".concat(t)).then((function(e){if(200===e.status){var c=Object(o.a)(r).filter((function(e){return e.id!==t}));s(c)}}))}catch(e){throw new Error("Error")}},m=function(t){try{u.a.post("https://jsonplaceholder.typicode.com/posts",{post:t}).then((function(t){if(201===t.status){f.a.fire({position:"top-end",icon:"success",title:"Post created!",showConfirmButton:!1,timer:1500});var e={id:t.data.id},c=Object.assign({},t.data.post,e);s([].concat(Object(o.a)(r),[c]))}}))}catch(e){throw new Error("Error en API")}},x=function(t){var e=t.id;try{u.a.put("https://jsonplaceholder.typicode.com/posts/".concat(e),{postUpdated:t}).then((function(e){if(200===e.status){var c=e.data.id,n=r.findIndex((function(t){return c===t.id}));r[n]=t,s(r),f.a.fire({position:"top-end",icon:"success",title:"Post updated!",showConfirmButton:!1,timer:1500})}}))}catch(c){throw new Error("Error en api")}};return Object(d.jsx)(i.a,{children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"row justify-content-center",children:[Object(d.jsx)(b,{}),Object(d.jsx)(p,{}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",render:function(){return Object(d.jsx)(O,{posts:r,removePost:h})}}),Object(d.jsx)(l.a,{exact:!0,path:"/post/:postId",render:function(t){var e=t.location.pathname.replace("/post/",""),c=r.filter((function(t){return t.id===Number(e)}));return Object(d.jsx)(v,{post:c[0]})}}),Object(d.jsx)(l.a,{exact:!0,path:"/crear",render:function(){return Object(d.jsx)(g,{createPost:m})}}),Object(d.jsx)(l.a,{exact:!0,path:"/edit/:postId",render:function(t){var e=t.location.pathname.replace("/edit/",""),c=r.filter((function(t){return t.id===Number(e)}));return Object(d.jsx)(P,{post:c[0],editPost:x})}})]})]})})})},C=function(){return Object(d.jsx)(E,{})};s.a.render(Object(d.jsx)(C,{}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.f568c7f1.chunk.js.map